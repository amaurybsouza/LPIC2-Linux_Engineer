The following is a partial list of the used files, terms and utilities:



#### MEDIR RESOLVER PROBLEMAS DE USO DE RECURSOS (iostat, vmstat e mpstat)

- são comandos e dados que são importantes observar para detecção de problemas de performance do sistema.



#iostat (relatório de uso de CPU e de I/O dos dispositivos de armazenamento)

- Agora vamos entender uma linha importante do comando iostat:

avg-cpu:  %user   %nice %system %iowait  %steal   %idle
           4,23    0,05    1,11    1,73    0,00   92,88


%user (tempo médio de uso de CPU de usuários, software que eu executei o usuário root, interface gráfica).

%nice (aplicações de usuário em que foi definido um nice especifico, alguma prioridade)

%system (uso de CPU pelo kernel, alocação de recursos)

%iowait (tempo de espera da CPU para esperar um procedimento de entrada e saída em disco, lentidão do disco, para escrever em determinado de setor do disco)

%steal (usado em máquinas virtuais, CPU virtual, tempo da CPU da máquina virtual ficou esperando a CPU real dar o recurso para a CPU virtual)

%idle (tempo que minha CPU ficou em status idle)


- Opções do comando iostat
-m: mostra o relatório, os dados em mega bytes.
-h: mostra em modo mais humano, mais detalhado.
-c: mostra só dados de CPU.
-d: mostra apena os devices no relatório. 
-p: mostra as partições (dados de I/O das partições)

#Outro detalhe importante com o comando iostat, é que ele pode mostrar as informações em intervalos:

$iostat -c 2 (mostra os dados de CPU a cada dois segundos)
Linux 4.15.0-45-generic (wk2001876) 	05/02/2019 	_x86_64_	(8 CPU)

avg-cpu:  %user   %nice %system %iowait  %steal   %idle
           4,35    0,04    1,19    1,34    0,00   93,09


$iostat -c 2 5 (mostra os dados de CPU a cada dois segundos, por 5 vezes)
Linux 4.15.0-45-generic (wk2001876)     05/02/2019      _x86_64_        (8 CPU)

avg-cpu:  %user   %nice %system %iowait  %steal   %idle
           4,35    0,04    1,19    1,34    0,00   93,09


$iostat -d 2
Linux 4.15.0-45-generic (wk2001876) 	05/02/2019 	_x86_64_	(8 CPU)

Device             tps    kB_read/s    kB_wrtn/s    kB_read    kB_wrtn
loop0             0,01         0,25         0,00       1056          0
loop1             0,01         0,08         0,00        352          0
loop2             0,01         0,08         0,00        352          0
loop3             0,03         0,27         0,00       1138          0
loop4             0,01         0,03         0,00        126          0
loop5             0,64         0,88         0,00       3704          0
loop6             0,02         0,26         0,00       1110          0
loop7             0,01         0,08         0,00        348          0
sda              24,28       435,23       378,73    1826253    1589184
loop8             0,02         0,26         0,00       1111          0
loop9             0,01         0,08         0,00        354          0
loop10            0,01         0,03         0,00        123          0
loop11            0,12         0,19         0,00        803          0
loop12            0,01         0,03         0,00        120          0
loop13            0,04         0,29         0,00       1206          0
loop14            0,01         0,03         0,00        127          0



#vmstat (mostra informações sobre os processos, memória, paginação, buffer, blocos de I/O)

$vmstat 
procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----
 r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st
 0  0      0 891284  10100  80544    0    0    77     6   12   22  0  0 100  0  0


-> As duas primeiras colunas do comando "vmstat" são importantes:

r: é o que está na fila de processamento dos processadores.

b: é o que está em estado de bloqueio, processo bloqueado, ele fica com esse "b"


- Opções do comando vmstat
-d: mostra os dispositivos que tem na máquina (sda/sdb).
-p: mostra as partições (tem que especificar a partição).



#mpstat (mostra informações sobre CPU, mais detalhado do que eu tenho no iostat)

$mpstat 
Linux 4.9.0-8-amd64 (lpi2) 	06-02-2019 	_x86_64_	(1 CPU)

21:05:28     CPU    %usr   %nice    %sys %iowait    %irq   %soft  %steal  %guest  %gnice   %idle
21:05:28     all    0,05    0,00    0,18    0,06    0,00    0,01    0,00    0,00    0,00   99,69















Exemplos: 
whatis iostat 
iostat (1)           - Report Central Processing Unit (CPU) statistics and input/output statistics for devices and partitions.




#netstat




#w


#top



#sar



#processes blocked on I/O

#blocks out


#pstree, ps

#Isof

#uptime

#swap

#blocks in


